(function(c){var b=!1,a=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;c.th={Klass:function(){}};c.th.Klass.extend=function(e){function d(){!b&&this.init&&this.init.apply(this,arguments)}var c=this.prototype;b=!0;var g=new this;b=!1;for(var f in e)g[f]="function"===typeof e[f]&&"function"===typeof c[f]&&a.test(e[f])?function(a,e){return function(){var b=this._super;this._super=c[a];var d=e.apply(this,arguments);this._super=b;return d}}(f,e[f]):e[f];d.prototype=g;d.prototype.set=function(a){for(var e in a)a.hasOwnProperty(e)&&
"undefined"!==typeof this[e]&&(this[e]=a[e])};d.prototype.constructor=d;d.extend=arguments.callee;return d}})(this);
(function(c){var b=c.th.Klass.extend({init:function(a){this.active=!1;this.cycles=0;this.loopFunction=null;this.ejecta=!1;this.set(a);this.findCanvas()},findCanvas:function(){var a=document.getElementById("canvas"),e=a.getContext("2d");this.ejecta||(a.width=a.clientWidth,a.height=a.clientHeight);c.th.ctx=e;c.th.canvas=a},start:function(){this.active=!0;this.loop()},stop:function(){this.active=!1},clear:function(){th.ctx.clearRect(0,0,th.canvas.width,th.canvas.height)},loop:function(){this.active&&
(this.cycles+=1,this.clear(),this.loopFunction&&this.loopFunction(),th.helpers.requestAnimationFrame(this.loop.bind(this)))}});c.th.Game=b})(this);
(function(c){var b={center:"CENTER",centerTop:"CENTER_TOP",centerBottom:"CENTER_BOTTOM",leftCenter:"LEFT_CENTER",leftTop:"LEFT_TOP",leftBottom:"LEFT_BOTTOM",rightCenter:"RIGHT_CENTER",rightTop:"RIGHT_TOP",rightBottom:"RIGHT_BOTTOM"};th.POSITIONS=b;var a=c.th.Klass.extend({init:function(a){this.active=!0;this.image=this.color=null;this.y=this.x=this.height=this.width=0;this.animate=!1;this.frames=this.delay=1;this.currentDelay=this.currentFrame=0;this.loop=!0;this.set(a)},tick:function(){this.active&&
(this.draw(),1<this.frames&&this._updateFrame())},draw:function(){var a=th.ctx;this.color?this._drawShape(a):this._drawImage(a)},update:function(a,b){this.x=a||0;this.y=b||0},position:function(a){var d,c,g,f,h=th.canvas.width,j=th.canvas.height;f=~~(j/2)-~~(this.height/2);g=~~(h/2)-~~(this.width/2);a===b.center?(d=g,c=f):a===b.centerTop?(d=g,c=0):a===b.centerBottom?(d=g,c=~~(j-this.height)):a===b.leftCenter?(d=0,c=f):a===b.rightCenter?(d=~~(h-this.width),c=f):a===b.leftTop?c=d=0:a===b.rightTop?(c=
0,d=~~(h-this.width)):a===b.leftBottom?(c=~~(j-this.height),d=0):a===b.rightBottom&&(c=~~(j-this.height),d=~~(h-this.width));this.update(d,c)},setImage:function(a){this.image=this.image instanceof Image?this.image:new Image;this.image.src=a},_drawImage:function(a){a.drawImage(this.image,this.currentFrame*this.width,0,this.width,this.height,this.x,this.y,this.width,this.height)},_drawShape:function(a){a.beginPath();a.fillStyle=this.color;a.fillRect(this.x,this.y,this.width,this.height)},_updateFrame:function(){this.currentDelay+=
1;this.currentDelay===this.delay&&(this.currentFrame===this.frames-1?this.loop?this.currentFrame=0:this.active=!1:this.currentFrame+=1,this.currentDelay=0)}});c.th.Entity=a})(this);
(function(c){var b=c.th.Klass.extend({init:function(a){this.active=!0;this.content="";this.color="#000";this.fontSize="12px";this.fontFamily="sans-serif";this.cyclesRun=this.y=this.x=0;this.maxCycles=null;this.set(a)},tick:function(){this.active&&(this.draw(),this._updateClock())},draw:function(){var a=th.ctx;a.save();a.fillStyle=this.color;a.font=this.fontSize+" "+this.fontFamily;a.fillText(this.content,this.x,this.y);a.restore()},update:function(a,b){this.x=a;this.y=b},setContent:function(a){this.content=
a},_updateClock:function(){if(null!==this.maxCycles)return this.cyclesRun+=1,this.cyclesRun>=this.maxCycles?(this.active=!1,!0):!1}});c.th.Text=b})(this);
(function(c){var b=c.th.Klass.extend({init:function(a){this.active=!0;this.radius=10;this.life=20;this.r=255*Math.random()<<0;this.g=255*Math.random()<<0;this.b=255*Math.random()<<0;this.y=this.x=0;this.direction={x:-2.5+5*Math.random(),y:-15+10*Math.random()};this.set(a);this._radius=this.radius+20*Math.random();this._life=this.life+10*Math.random();this.lifeRemaining=this.life},tick:function(){if(this.active)return this.draw(),0>this.lifeRemaining||0>this._radius?this.active=!1:!0},draw:function(){var a=
th.ctx;a.beginPath();this.opacity=~~(100*(this.lifeRemaining/this._life))/100;var b=a.createRadialGradient(this.x,this.y,0,this.x,this.y,this._radius),c=this._rgba(this.r,this.g,this.b,this.opacity);b.addColorStop(0,c);b.addColorStop(0.5,c);b.addColorStop(1,this._rgba(this.r,this.g,this.b,0));a.fillStyle=b;a.arc(this.x,this.y,this._radius,2*Math.PI,!1);a.fill();this.lifeRemaining--;this._radius--;this.x+=this.direction.x;this.y+=this.direction.y},update:function(a,b){this.x=a||0;this.y=b||0},_rgba:function(a,
b,c,k){return"rgba("+a+", "+b+", "+c+", "+k+")"}});c.th.Particle=b})(this);
(function(c){c.th.helpers={requestAnimationFrame:function(b){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)})(b)},collision:function(b,a){return"undefined"===typeof b||"undefined"===typeof a||!b.active||!a.active?!1:b.x<a.x+a.width&&b.x+b.width>a.x&&b.y<a.y+a.height&&b.y+b.height>a.y},random:function(b,a){return~~(Math.random()*(a-b+1))+
b},randomColor:function(){return"#"+(16777215*Math.random()<<0).toString(16)}}})(this);